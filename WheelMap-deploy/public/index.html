<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="page-enter" content="blendTrans(duration=0.5)">
    <meta http-equiv="page-exit" content="blendTrans(duration=0.5)">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=q1hz24YqUC7g84TRhAW3v8a52xq51B3472o9tPeF"></script>
    <link rel="stylesheet" href="CSS/index.css">
    <link rel="stylesheet" href="CSS/all.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>
<body>
    <div id="box">
        <div class="nav container">
            <div class="flex">
                <div class="nav-toggle" id="nav_toggle">
                    <i class='bx bx-menu' style="font-size: 1.5rem;"></i>
                </div>
                <input type="text" placeholder="장소를 입력하세요" onfocus="this.placeholder=''" onblur="this.placeholder='장소를 입력하세요'" >
            </div>
            <div>
                <i class='bx bx-search' style="font-size: 1.5rem;"></i>
            </div>
        </div>
        <div id="map">
            <body onload="initTmap()"><!-- 맵 생성 실행 -->
                <div id="map_div" style="height: 800px;"></div>
            </body>
        </div>
        <div id="footer">
            <div id="a2">
                <i class='bx bxs-battery-charging'></i>
                <span id = "footer_text">가까운 충전소</span>
            </div>
            <div id="c2" class="spotbox" onclick="location.href='navigation.html'">
                신길역 230m
            </div>
            <div id="d2" class="spotbox">
                양평2동주민센터 542m
            </div>
            <div id="e2" class="spotbox">
                신길4동주민센터 1.2km
            </div>
            <button class="more">
                <hr>
                더보기
            </button>
        </div>
    </div>

    <script>
        function initTmap() {
        }
    
        initTmap();
    
        document.getElementById('search-form').addEventListener('submit', function (e) {
            e.preventDefault(); // 기본 동작 방지 (페이지 새로고침)
    
            const searchQuery = document.getElementById('search-query').value;
    
            // 서버에 POST 요청 보내기
            fetch(`/search?name=${searchQuery}`, {
                method: 'GET',
                headers: {
                    'Content-Type': "text",
                },
            })
            .then(response => response)
            .then(data => {
                const resultsList = document.getElementById('results-list');
                const noResultsMessage = document.getElementById('no-results-message');
    
                // 결과 목록 초기화
                resultsList.innerHTML = '';
    
                if (data.results && data.results.length > 0) {
                    // 검색 결과가 있을 경우, 목록에 결과 추가
                    data.results.forEach(result => {
                        const listItem = document.createElement('li');
                        listItem.textContent = result.facility_name; // 결과 필드에 따라 수정
                        resultsList.appendChild(listItem);
                    });
    
                    noResultsMessage.style.display = 'none'; // 결과 메시지 숨기기
                } else {
                    // 검색 결과가 없을 경우 메시지 표시
                    noResultsMessage.style.display = 'block';
                }
            })
            .catch(error => {
                console.error('오류 발생: ', error);
            });
        });
    </script>
        <script src="index.js"></script>
</body>
</html>
