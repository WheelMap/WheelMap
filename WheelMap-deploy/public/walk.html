<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>walk</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=q1hz24YqUC7g84TRhAW3v8a52xq51B3472o9tPeF"></script>
    <link rel="stylesheet" href="CSS/walk.css">
    <link rel="stylesheet" href="CSS/all.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body onload="initTmap()">
    <span class="slideshow-container">
        <div class="slide">
            <i class='bx bx-subdirectory-right'></i>
            <div class="text">
                <div class="meter" id="meter"></div>
                <div class="subText" id="subText"></div>
            </div>
        </div>
    </span>
    <div id="map"></div>

    <script type="text/javascript">
        var map;
        var marker_s, marker_e, marker_p1, marker_p2;
        var totalMarkerArr = [];
        var drawInfoArr = [];
        var resultdrawArr = [];

        // 문구와 위치 매핑을 위한 객체
        const locationTextMapping = {
            "37.46671695320371_126.93308346538122": "첫 번째 위치 문구",
            "37.472184550611196_126.93435885637831": "두 번째 위치 문구",
            // 여기에 더 많은 위치와 문구를 추가할 수 있습니다.
        };

        // 페이지가 로딩이 된 후 호출하는 함수입니다.
        function initTmap() {
            // map 생성 및 초기화
            map = new Tmapv2.Map("map", {
                center: new Tmapv2.LatLng(37.46671695320371, 126.93308346538122),
                width: "100%",
                height: "580px",
                zoom: 16
            });

            // 시작점과 도착점 마커 표시
            marker_s = new Tmapv2.Marker({
                position: new Tmapv2.LatLng(37.46671695320371, 126.93308346538122),
                icon: "image/MyLocationMarker.png",
                iconSize: new Tmapv2.Size(20, 20),
                map: map
            });

            marker_e = new Tmapv2.Marker({
                position: new Tmapv2.LatLng(37.472184550611196, 126.93435885637831),
                icon: "image/EndLocationMarker.png",
                iconSize: new Tmapv2.Size(36, 50),
                map: map
            });

            // 사용자 위치 변화 감지 시작
            getUserLocation();
        }

        // 문구 업데이트 함수
        function updateTextDescription(newText) {
            document.getElementById("subText").innerHTML = newText;
        }

        // 사용자의 위치 변화 감지 함수
        function detectLocationChange({ coords }) {
            const latitude = coords.latitude;
            const longitude = coords.longitude;
            const locationKey = `${latitude}_${longitude}`;

            if (locationTextMapping.hasOwnProperty(locationKey)) {
                const newText = locationTextMapping[locationKey];
                updateTextDescription(newText);
            }
        }

        // 사용자의 위치 변화 감지 시작
        function getUserLocation() {
            if (!navigator.geolocation) {
                throw "위치 정보가 지원되지 않습니다.";
            }
            navigator.geolocation.watchPosition(detectLocationChange);
        }
    </script>
</body>
</html>
